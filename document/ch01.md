# ğŸ“± node.jsì˜ express í”„ë ˆì„ì›Œí¬ ì´ìš©í•´ë³´ê¸°
---

### 1. package.json ì‘ì„±
`npm init` : í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì—¬ëŸ¬ ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  ê¸°ë³¸ì ì¸ package.jsonì„ ìƒì„±í•´ì¤€ë‹¤.

```json
{
  "name": "express-tutorial",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/leehosu/express-tutorial.git"
  },
  "author": "",
  "license": "ISC"
}

```

### 1-1. NPMìœ¼ë¡œ dependency ì„¤ì¹˜
`npm install`

### 2. express ì„œë²„ ìƒì„±
- `npm install express` ëª…ë ¹ì–´ë¡œ express ì˜ì¡´ì„± íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•œ í›„ server.jsë¥¼ ë§Œë“¤ì–´ ì½”ë“œë¥¼ ì…ë ¥í•œë‹¤.

> íŒŒì¼ ìœ„ì¹˜ : ../server.js
```js
var express = require('express');
var app = express();
var server = app.listen(3000, function(){
    console.log("Express server has started on port 3000")
})
```
- ê·¸ í›„ `node server.js` ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œ í›„ ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì‹¤í–‰ì‹œí‚¨ ë’¤ `localhost://3000`ë¥¼ ì…ë ¥í•˜ì—¬ ì„œë²„ë¥¼ í™•ì¸í•œë‹¤.
- ê·¸ ê²°ê³¼ëŠ” `Cannot GET/` ì¼ê²ƒì´ë‹¤. ì™œ? Routerë¥¼ ì„¤ì •í•˜ì§€ ì•Šì•˜ìœ¼ë‹ˆê¹Œ!

### 3. Routerë¡œ Request ì²˜ë¦¬í•˜ê¸°
- í˜„ì¬ ì„œë²„ë¥¼ ëŒë¦¬ê¸°ìœ„í•´ ëª¨ë“  ì¤€ë¹„ë¥¼ ëëƒˆê³  ë¸Œë¼ìš°ì €ì—ì„œ Requestê°€ ì™”ì„ë•Œ ì„œë²„ì—ì„œ ì–´ë–¤ ì‘ì—…ì„ í•´ì•¼í•˜ëŠ”ì§€ Routerë¥¼ í†µí•´ ì„¤ì •í•´ì¤˜ì•¼í•œë‹¤.

```js
app.get('/',function(req,res){
    res.send('Hello World');
});
```
- ìœ„ ì½”ë“œë¥¼ server.jsì— ì‘ì„± í›„ `node server.js` ëª…ë ¹ì–´ë¥¼ ì¬ì‹¤í–‰í•˜ë©´ `http://localhost:3000/`ë¡œ ì ‘ì†í•˜ì˜€ì„ë•Œ `Hello World`ë¥¼ ë°˜í™˜í•œë‹¤.

### 3-1. Router ì„¤ì •
- root ê²½ë¡œì— router ë””ë ‰í„°ë¦¬ë¥¼ ë§Œë“  í›„ `main.js`íŒŒì¼ì„ ìƒì„±í•œë‹¤.

```js
module.exports = function(app){
    app.get('/', function(req,res){
        res.render('index.html');
    });
    app.get('/about', function(req,res){
        res.render('about.html');
    });
}
```
- ìœ„ ì½”ë“œëŠ” urlì´ `/` ì¼ë•Œë‚˜ `/about` ì¼ë•Œ ë‹¤ë¥¸ html íŒŒì¼ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ êµ¬ë¶„í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.

### 4. HTML í˜ì´ì§€ ë„ìš°ê¸°
- root ê²½ë¡œì— views ë””ë ‰í„°ë¦¬ë¥¼ ë§Œë“  í›„ `index.html`ê³¼ `about.html`ì„ ë§Œë“ ë‹¤.

> íŒŒì¼ ê²½ë¡œ : /views/index.html
```html
<html>
  <head>
    <title>Main</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
  </head>
  <body>
    this is index page,
    made by lake
  </body>
</html>
```

> íŒŒì¼ ê²½ë¡œ : /views/about.html
```html
<html>
  <head>
    <title>About</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
  </head>
  <body>
    this is about page,
    made by lake
  </body>
</html>
```

- ê·¸ í›„ server.jsë¥¼ ìˆ˜ì •í•œë‹¤.

> íŒŒì¼ ìœ„ì¹˜ : /server.js
```js
var express = require('express');
var app = express();
var router = require('./router/main')(app);

app.set('views',__dirname + '/views');
app.set('view engine','ejs');
app.engine('html',require('ejs').renderFile);

var server = app.listen(3000, function(){
    console.log("Express server has started on port 3000")
})

app.use(express.static('public'));
```
- `var router = require('./router/main')(app);` : router ëª¨ë“ˆì¸ main.jsë¥¼ ë¶ˆëŸ¬ì™€ì„œ appì— ì „ë‹¬í•´ì¤€ë‹¤.
- `app.set('views',__dirname + '/views');` : ì„œë²„ê°€ ì½ì„ ìˆ˜ ìˆê²Œ HTMLì˜ ìœ„ì¹˜ë¥¼ ì§€ì •í•´ì¤€ë‹¤. ì—¬ê¸°ì„œëŠ” `/views` íŒŒì¼ì´ë‹¤.
- `app.set('view engine','ejs');`
`app.engine('html',require('ejs').renderFile);` 
: ì„œë²„ê°€ HTMLì„ ë Œë”ë§í• ë•Œì— EJSë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•œë‹¤.

### 5. ì •ì ì¸ íŒŒì¼ ë‹¤ë£¨ê¸°
- ì •ì  íŒŒì¼ì´ë€? HTMLì—ì„œ ì‚¬ìš©ë˜ëŠ” .js íŒŒì¼, css íŒŒì¼, image íŒŒì¼ë“±ì„ ê°€ë¦¬í‚¨ë‹¤. 
- ì„œë²„ì—ì„œ ì •ì ì¸ íŒŒì¼ì„ ë‹¤ë£¨ê¸° ìœ„í•´ì„œëŠ” `express.static()` ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ë©´ ëœë‹¤.

> íŒŒì¼ ìœ„ì¹˜ : /public/css/style.css
```css
body{
	background-color: black;
	color: white;
}
```
- ìœ„ì˜ css íŒŒì¼ì„ ì¶”ê°€í•œ í›„ ì •ì ì¸ íŒŒì¼ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ `server.js` íŒŒì¼ì— ì•„ë˜ì˜ ì½”ë“œë¥¼ ì¶”ê°€í•œë‹¤.

```js
app.use(express.static('public'));
```

### 6. ì‹¤í–‰
`node server.js` ëª…ë ¹ì–´ë¡œ ì„œë²„ë¥¼ ì‹¤í–‰í•œ í›„ ë¸Œë¼ìš°ì €ë¡œ ì ‘ì†í•´ë³´ë©´ ì™„ì„±.

![index](../image/index_page.png)
![about](../image/about_page.png)
